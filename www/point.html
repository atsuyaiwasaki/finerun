<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset=utf-8>
    <script
    	type="text/javascript"
    	src="http://maps.google.com/maps/api/js?sensor=false&libraries=geometry"
    ></script>
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0px; padding: 0px }
      #map { height: 100% }
    </style>
  </head>

  <body>
    <div id="map"></div>
    <script type="text/javascript">
      google.maps.event.addDomListener(window, "load", function() {

      var latLng = JSON.parse(localStorage.getItem('latLng'));
      console.log(latLng)

      var patharray = new Array();
      patharray[0] = new google.maps.LatLng(35.625, 139.342);
      patharray[1] = new google.maps.LatLng(35.624, 139.341);
      patharray[2] = new google.maps.LatLng(35.622, 139.340);
      patharray[3] = new google.maps.LatLng(35.620, 139.339);

    	// 距離
    	var distance = google.maps.geometry.spherical.computeDistanceBetween(patharray[0], patharray[1]);
      distance += google.maps.geometry.spherical.computeDistanceBetween(patharray[1], patharray[2]);
      distance += google.maps.geometry.spherical.computeDistanceBetween(patharray[2], patharray[3]);

    	var map = new google.maps.Map(document.getElementById('map'), {
    		center: patharray[3],
    		zoom: 15,
    		mapTypeId: google.maps.MapTypeId.ROADMAP
    	});

    	// 吹き出しに表示
    	new google.maps.InfoWindow({
    		content: distance + ' m',
    		position: patharray[3]
    	}).open(map);

    	// 普通のPolyline（メルカトル図法上での最短距離）
    	new google.maps.Polyline({
    		path: patharray,
    		map: map,
    		strokeColor: 'red'
    	});
    });
    </script>
  </body>
</html>

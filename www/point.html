<!DOCTYPE html>
<html>
  <head>

    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0px; padding: 0px }
      #map { height: 100% }
    </style>

    <script src="http://maps.google.com/maps/api/js?v=3&sensor=false"
        type="text/javascript" charset="UTF-8"></script>
    <script
    type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false&libraries=geometry"
    ></script>

    <script type="text/javascript">
    //<![CDATA[

    var map;

    // 初期化。bodyのonloadでinit()を指定することで呼び出してます
    function init() {

      // Google Mapで利用する初期設定用の変数
      var latlng = new google.maps.LatLng(39, 138);
      var opts = {
        zoom: 6,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: latlng
      };

      // getElementById("map")の"map"は、body内の<div id="map">より
      map = new google.maps.Map(document.getElementById("map"), opts);

      var patharray = new Array();
      patharray[0] = new google.maps.LatLng(38, 137);
      patharray[1] = new google.maps.LatLng(39, 137);
      patharray[2] = new google.maps.LatLng(40, 138);
      patharray[3] = new google.maps.LatLng(37, 139);

      // Polylineの初期設定
      var polylineOpts = {
        map: map,
        path: patharray
      };
      // 直前で作成したPolylineOptionsを利用してPolylineを作成
      var polyline = new google.maps.Polyline(polylineOpts);

      var distance = google.maps.geometry.spherical.computeDistanceBetween(patharray[0], patharray[1]);
      console.log(distance);
      distance = google.maps.geometry.spherical.computeDistanceBetween(patharray[1], patharray[2]);
      console.log(distance);
      distance = google.maps.geometry.spherical.computeDistanceBetween(patharray[2], patharray[3]);
      console.log(distance);
      distance = google.maps.geometry.spherical.computeDistanceBetween(patharray[3], patharray[4]);
      console.log(distance);
    }

    //]]>
    </script>
  </head>

  <body onload="init()">
    <div id="map"></div>
  </body>

</html>
